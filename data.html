<!DOCTYPE html>
<html>
<head>
  <title>Expense Tracker</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; }
    input, select { margin: 5px; padding: 6px; }
    table { margin-top: 1rem; border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 8px; }
  </style>
</head>
<body>
  <h2>Expense Entry</h2>
  <input type="date" id="date">
  <select id="category">
    <option>Food</option>
    <option>Transport</option>
    <option>Utilities</option>
    <option>Entertainment</option>
  </select>
  <input type="text" id="desc" placeholder="Description">
  <input type="number" id="amt" placeholder="Amount">
  <button onclick="addExpense()">Add</button>

  <h3>All Expenses</h3>
  <table id="expenseTable">
    <thead><tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr></thead>
    <tbody></tbody>
  </table>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbz8Y2khxii8WZu00PKYR7etZw1N275phMUOjLmonSGVBR75H4GrXp98vf7yfz_974Md/exec';

    async function loadExpenses() {
      const res = await fetch(scriptURL);
      const data = await res.json();
      const tbody = document.querySelector("#expenseTable tbody");
      tbody.innerHTML = '';
      data.forEach(e => {
        const row = `<tr><td>${e.date}</td><td>${e.category}</td><td>${e.description}</td><td>${e.amount}</td></tr>`;
        tbody.innerHTML += row;
      });
    }

    async function addExpense() {
      const data = {
        date: document.getElementById('date').value,
        category: document.getElementById('category').value,
        description: document.getElementById('desc').value,
        amount: document.getElementById('amt').value
      };

      await fetch(scriptURL, {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      });

      loadExpenses(); // refresh
    }

    window.onload = loadExpenses;
  </script>
</body>
</html>
